What we need

Ds logs:
    - voltage versus current versus time
    - Battery ID

CBA:
    - its already exported as a CSV so we need to parse the data and pass it into a ML model or function

terminal voltage Ã— current gives instantaneous power to the load.

From voltage drop vs. current you can also estimate internal resistance and thus internal losses 
I^2*R

Integrate power over time to get energy (Wh); integrate current to get capacity (Ah).

Watch out for measurement timing, temperature, sensor error, and that internal resistance can vary with pulse width and frequency.

H_C = C_measured / C_rated
    H_R = R_new / R_measured
    H_total = 100 * (0.7 * H_C + 0.3 * H_R)
    return max(0, min(100, H_total))

# Example:
C_measured = 1.6  # Ah
C_rated = 2.0     # Ah
R_measured = 0.1  # ohm
R_new = 0.05      # ohm

score = battery_health(C_measured, C_rated, R_measured, R_new)
print(f"Battery Health: {score:.1f}%")
